{
  "name": "replace",
  "description": "Replaces text within a file. By default, replaces a single occurrence, but can replace multiple occurrences when `expected_replacements` is specified. This tool requires providing significant context around the change to ensure precise targeting. All paths are relative to the current request's sandbox directory.",
  "parameters": {
    "type": "OBJECT",
    "properties": {
      "file_path": {
        "type": "STRING",
        "description": "The path to the file to modify."
      },
      "old_string": {
        "type": "STRING",
        "description": "The exact literal text to replace. For single replacements (default), include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string is not the exact literal text (i.e. you escaped it) or does not match exactly, the tool will fail."
      },
      "new_string": {
        "type": "STRING",
        "description": "The exact literal text to replace `old_string` with. Ensure the resulting code is correct and idiomatic."
      },
      "instruction": {
        "type": "STRING",
        "description": "A clear, semantic instruction for the code change, acting as a high-quality prompt for an expert LLM assistant. It must be self-contained and explain the goal of the change."
      },
      "expected_replacements": {
        "type": "NUMBER",
        "minimum": 1,
        "description": "Number of replacements expected. Defaults to 1 if not specified. Use when you want to replace multiple occurrences."
      }
    },
    "required": ["file_path", "instruction", "old_string", "new_string"]
  }
}
